{"ast":null,"code":"import _regeneratorRuntime from\"D:/documents/DEPLOYTRIES/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/documents/DEPLOYTRIES/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/documents/DEPLOYTRIES/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Form,FormControl,FormLabel,Button,FormGroup}from'react-bootstrap';import React from'react';import{useGlobalContext}from'../context';import{useNavigate}from'react-router-dom';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];//const [name, setName] = React.useState('');\nvar name='';var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _useGlobalContext=useGlobalContext(),setUserInfo=_useGlobalContext.setUserInfo,setLoading=_useGlobalContext.setLoading,loading=_useGlobalContext.loading;var navigate=useNavigate();var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);_context.prev=2;_context.next=5;return axios.post('/api/v1/users/login',{name:name,email:email,password:password});case 5:_context.next=7;return axios.get(\"/api/v1/users/login/\".concat(email));case 7:user=_context.sent;setUserInfo({name:user.data.name,email:email,password:password,_id:user.data._id});localStorage.setItem('userInfo',JSON.stringify({name:user.data.name,email:email,_id:user.data._id}));navigate('/users/joblist');setLoading(false);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);toast.error(_context.t0.message);setLoading(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"div-center flex text-white bg-ground \",children:\" LOADING... \"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"div-center flex text-white \",children:[/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\" Email \"}),' ',/*#__PURE__*/_jsx(FormControl,{type:\"email\",required:true,onChange:function onChange(e){setEmail(e.target.value);}}),' ']}),' ',/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\" Password \"}),' ',/*#__PURE__*/_jsx(FormControl,{type:\"password\",required:true,onChange:function onChange(e){setPassword(e.target.value);}}),' ']}),' ',/*#__PURE__*/_jsxs(\"div\",{className:\"btn-container\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(Button,{type:\"submit\",style:{width:'100%'},children:[\"Login\",' ']}),' ']}),' ']}),' ']});};export default Login;","map":{"version":3,"names":["Form","FormControl","FormLabel","Button","FormGroup","React","useGlobalContext","useNavigate","axios","toast","Login","useState","email","setEmail","name","password","setPassword","setUserInfo","setLoading","loading","navigate","submitHandler","e","preventDefault","post","get","user","data","_id","localStorage","setItem","JSON","stringify","error","message","target","value","width"],"sources":["D:/documents/DEPLOYTRIES/frontend/src/screens/Login.js"],"sourcesContent":["import {\r\n  Form,\r\n  FormControl,\r\n  FormLabel,\r\n  Button,\r\n  FormGroup,\r\n} from 'react-bootstrap';\r\n\r\nimport React from 'react';\r\nimport { useGlobalContext } from '../context';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = React.useState('');\r\n  //const [name, setName] = React.useState('');\r\n  let name = '';\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const { setUserInfo, setLoading, loading } = useGlobalContext();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      await axios.post('/api/v1/users/login', {\r\n        name,\r\n        email,\r\n        password,\r\n      });\r\n      const user = await axios.get(`/api/v1/users/login/${email}`);\r\n\r\n      setUserInfo({\r\n        name: user.data.name,\r\n\r\n        email: email,\r\n        password: password,\r\n        _id: user.data._id,\r\n      });\r\n\r\n      localStorage.setItem(\r\n        'userInfo',\r\n        JSON.stringify({\r\n          name: user.data.name,\r\n          email: email,\r\n          _id: user.data._id,\r\n        })\r\n      );\r\n\r\n      navigate('/users/joblist');\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"div-center flex text-white bg-ground \"> LOADING... </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"div-center flex text-white \">\r\n      <Form onSubmit={submitHandler}>\r\n        <FormGroup>\r\n          <FormLabel> Email </FormLabel>{' '}\r\n          <FormControl\r\n            type=\"email\"\r\n            required\r\n            onChange={(e) => {\r\n              setEmail(e.target.value);\r\n            }}\r\n          />{' '}\r\n        </FormGroup>{' '}\r\n        <FormGroup>\r\n          <FormLabel> Password </FormLabel>{' '}\r\n          <FormControl\r\n            type=\"password\"\r\n            required\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n          />{' '}\r\n        </FormGroup>{' '}\r\n        <div className=\"btn-container\" style={{ width: '100%' }}>\r\n          <Button type=\"submit\" style={{ width: '100%' }}>\r\n            Login{' '}\r\n          </Button>{' '}\r\n        </div>{' '}\r\n      </Form>{' '}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}